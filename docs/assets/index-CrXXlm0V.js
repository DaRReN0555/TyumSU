const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-WdIBkp0O.js","assets/colorToUniform-Cg-chHHJ.js","assets/FederatedEventTarget-C6NiCBf2.js","assets/CanvasTextSystem-DwnnAOm1.js","assets/CanvasPool-DzTIK7yo.js","assets/init-DHliLCKV.js","assets/webworkerAll-BxMH5jDM.js","assets/WebGPURenderer-DS_uJD9r.js","assets/SharedSystems-CfF1st8a.js","assets/WebGPURenderer-CXUN9EA6.js","assets/WebGLRenderer-CZjyH_t-.js","assets/WebGLRenderer-By_91Hag.js"])))=>i.map(i=>d[i]);
import{B as e,Et as t,Ot as n,R as r,Tt as i,V as a,bt as o,ct as s,ft as c,gt as l,ht as u,it as d,wt as f,xt as p,yt as m,z as h}from"./colorToUniform-Cg-chHHJ.js";import{A as g,D as _,E as ee,M as te,N as ne,O as v,T as y,_ as b,b as re,f as ie,g as ae,j as x,k as S,p as C,v as oe,w as se,x as ce}from"./CanvasTextSystem-DwnnAOm1.js";import"./FederatedEventTarget-C6NiCBf2.js";import{h as le,m as ue}from"./SharedSystems-CfF1st8a.js";import"./CanvasPool-DzTIK7yo.js";import"./WebGLRenderer-By_91Hag.js";import"./WebGPURenderer-CXUN9EA6.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var de=`modulepreload`,fe=function(e){return`/projectUNI/`+e},pe={};const w=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=fe(t,n),t in pe)return;pe[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:de,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var me={extension:{type:i.Environment,name:`browser`,priority:-1},test:()=>!0,load:async()=>{await w(()=>import(`./browserAll-WdIBkp0O.js`),__vite__mapDeps([0,1,2,3,4,5]))}},he={extension:{type:i.Environment,name:`webworker`,priority:0},test:()=>typeof self<`u`&&self.WorkerGlobalScope!==void 0,load:async()=>{await w(()=>import(`./webworkerAll-BxMH5jDM.js`),__vite__mapDeps([6,1,3,4,5]))}},ge;function _e(e){return ge===void 0&&(ge=(()=>{let t={stencil:!0,failIfMajorPerformanceCaveat:e??le.defaultOptions.failIfMajorPerformanceCaveat};try{if(!r.get().getWebGLRenderingContext())return!1;let e=r.get().createCanvas().getContext(`webgl`,t),n=!!e?.getContextAttributes()?.stencil;if(e){let t=e.getExtension(`WEBGL_lose_context`);t&&t.loseContext()}return e=null,n}catch{return!1}})()),ge}var ve;async function ye(e={}){return ve===void 0&&(ve=await(async()=>{let t=r.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(e)).requestDevice(),!0}catch{return!1}})()),ve}var be=[`webgl`,`webgpu`,`canvas`];async function xe(e){let t=[];e.preference?(t.push(e.preference),be.forEach(n=>{n!==e.preference&&t.push(n)})):t=be.slice();let n,r={};for(let i=0;i<t.length;i++){let a=t[i];if(a===`webgpu`&&await ye()){let{WebGPURenderer:t}=await w(async()=>{let{WebGPURenderer:e}=await import(`./WebGPURenderer-DS_uJD9r.js`);return{WebGPURenderer:e}},__vite__mapDeps([7,1,8,9,4]));n=t,r={...e,...e.webgpu};break}else if(a===`webgl`&&_e(e.failIfMajorPerformanceCaveat??le.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:t}=await w(async()=>{let{WebGLRenderer:e}=await import(`./WebGLRenderer-CZjyH_t-.js`);return{WebGLRenderer:e}},__vite__mapDeps([10,1,8,11]));n=t,r={...e,...e.webgl};break}else if(a===`canvas`)throw r={...e},Error(`CanvasRenderer is not yet implemented`)}if(delete r.webgpu,delete r.webgl,!n)throw Error(`No available renderer for the current environment`);let i=new n;return await i.init(r),i}var Se=class e{constructor(...e){this.stage=new a,e[0]!==void 0&&u(l,`Application constructor options are deprecated, please use Application.init() instead.`)}async init(t){t={...t},this.renderer=await xe(t),e._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return u(l,`Application.view is deprecated, please use Application.canvas instead.`),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,n=!1){let r=e._plugins.slice(0);r.reverse(),r.forEach(e=>{e.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Se._plugins=[];var Ce=Se;t.handleByList(i.Application,Ce._plugins),t.add(ue);var we=class extends ce{constructor(e,t){super();let{textures:n,data:r}=e;Object.keys(r.pages).forEach(e=>{let t=n[r.pages[parseInt(e,10)].id];this.pages.push({texture:t})}),Object.keys(r.chars).forEach(e=>{let t=r.chars[e],{frame:i,source:a,rotate:c}=n[t.page],l=new s({frame:o.transformRectCoords(t,i,c,new m),orig:new m(0,0,t.width,t.height),source:a,rotate:c});this.chars[e]={id:e.codePointAt(0),xOffset:t.xOffset,yOffset:t.yOffset,xAdvance:t.xAdvance,kerning:t.kerning??{},texture:l}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:`none`,range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){ae.install(e)}static uninstall(e){ae.uninstall(e)}},Te={test(e){return typeof e==`string`&&e.startsWith(`info face=`)},parse(e){let t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let e in t){let r=t[e].match(/^[a-z]+/gm)[0],i=t[e].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(let e in i){let t=i[e].split(`=`),n=t[0],r=t[1].replace(/"/gm,``),o=parseFloat(r);a[n]=isNaN(o)?r:o}n[r].push(a)}let r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:``,distanceField:null,baseLineOffset:0},[i]=n.info,[a]=n.common,[o]=n.distanceField??[];o&&(r.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),r.fontSize=parseInt(i.size,10),r.fontFamily=i.face,r.lineHeight=parseInt(a.lineHeight,10);let s=n.page;for(let e=0;e<s.length;e++)r.pages.push({id:parseInt(s[e].id,10)||0,file:s[e].file});let c={};r.baseLineOffset=r.lineHeight-parseInt(a.base,10);let l=n.char;for(let e=0;e<l.length;e++){let t=l[e],n=parseInt(t.id,10),i=t.letter??t.char??String.fromCharCode(n);i===`space`&&(i=` `),c[n]=i,r.chars[i]={id:n,page:parseInt(t.page,10)||0,x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xOffset:parseInt(t.xoffset,10),yOffset:parseInt(t.yoffset,10),xAdvance:parseInt(t.xadvance,10),kerning:{}}}let u=n.kerning||[];for(let e=0;e<u.length;e++){let t=parseInt(u[e].first,10),n=parseInt(u[e].second,10),i=parseInt(u[e].amount,10);r.chars[c[n]].kerning[c[t]]=i}return r}},Ee={test(e){let t=e;return typeof t!=`string`&&`getElementsByTagName`in t&&t.getElementsByTagName(`page`).length&&t.getElementsByTagName(`info`)[0].getAttribute(`face`)!==null},parse(e){let t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:``,distanceField:null,baseLineOffset:0},n=e.getElementsByTagName(`info`)[0],r=e.getElementsByTagName(`common`)[0],i=e.getElementsByTagName(`distanceField`)[0];i&&(t.distanceField={type:i.getAttribute(`fieldType`),range:parseInt(i.getAttribute(`distanceRange`),10)});let a=e.getElementsByTagName(`page`),o=e.getElementsByTagName(`char`),s=e.getElementsByTagName(`kerning`);t.fontSize=parseInt(n.getAttribute(`size`),10),t.fontFamily=n.getAttribute(`face`),t.lineHeight=parseInt(r.getAttribute(`lineHeight`),10);for(let e=0;e<a.length;e++)t.pages.push({id:parseInt(a[e].getAttribute(`id`),10)||0,file:a[e].getAttribute(`file`)});let c={};t.baseLineOffset=t.lineHeight-parseInt(r.getAttribute(`base`),10);for(let e=0;e<o.length;e++){let n=o[e],r=parseInt(n.getAttribute(`id`),10),i=n.getAttribute(`letter`)??n.getAttribute(`char`)??String.fromCharCode(r);i===`space`&&(i=` `),c[r]=i,t.chars[i]={id:r,page:parseInt(n.getAttribute(`page`),10)||0,x:parseInt(n.getAttribute(`x`),10),y:parseInt(n.getAttribute(`y`),10),width:parseInt(n.getAttribute(`width`),10),height:parseInt(n.getAttribute(`height`),10),xOffset:parseInt(n.getAttribute(`xoffset`),10),yOffset:parseInt(n.getAttribute(`yoffset`),10),xAdvance:parseInt(n.getAttribute(`xadvance`),10),kerning:{}}}for(let e=0;e<s.length;e++){let n=parseInt(s[e].getAttribute(`first`),10),r=parseInt(s[e].getAttribute(`second`),10),i=parseInt(s[e].getAttribute(`amount`),10);t.chars[c[r]].kerning[c[n]]=i}return t}},De={test(e){return typeof e==`string`&&e.includes(`<font>`)?Ee.test(r.get().parseXML(e)):!1},parse(e){return Ee.parse(r.get().parseXML(e))}},Oe=[`.xml`,`.fnt`],ke={extension:{type:i.CacheParser,name:`cacheBitmapFont`},test:e=>e instanceof we,getCacheableAssets(e,t){let n={};return e.forEach(e=>{n[e]=t,n[`${e}-bitmap`]=t}),n[`${t.fontFamily}-bitmap`]=t,n}},Ae={extension:{type:i.LoadParser,priority:v.Normal},name:`loadBitmapFont`,id:`bitmap-font`,test(e){return Oe.includes(_.extname(e).toLowerCase())},async testParse(e){return Te.test(e)||De.test(e)},async parse(e,t,n){let r=Te.test(e)?Te.parse(e):De.parse(e),{src:i}=t,{pages:a}=r,o=[],s=r.distanceField?{scaleMode:`linear`,alphaMode:`premultiply-alpha-on-upload`,autoGenerateMipmaps:!1,resolution:1}:{};for(let e=0;e<a.length;++e){let t=a[e].file,n=_.join(_.dirname(i),t);n=se(n,i),o.push({src:n,data:s})}let c=await n.load(o);return new we({data:r,textures:o.map(e=>c[e.src])},i)},async load(e,t){return await(await r.get().fetch(e)).text()},async unload(e,t,n){await Promise.all(e.pages.map(e=>n.unload(e.texture.source._sourceOrigin))),e.destroy()}},je=class{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log(`[BackgroundLoader] assets: `,this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}},Me={extension:{type:i.CacheParser,name:`cacheTextureArray`},test:e=>Array.isArray(e)&&e.every(e=>e instanceof s),getCacheableAssets:(e,t)=>{let n={};return e.forEach(e=>{t.forEach((t,r)=>{n[e+(r===0?``:r+1)]=t})}),n}};async function Ne(e){if(`Image`in globalThis)return new Promise(t=>{let n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e});if(`createImageBitmap`in globalThis&&`fetch`in globalThis){try{let t=await(await fetch(e)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}var Pe={extension:{type:i.DetectionParser,priority:1},test:async()=>Ne(`data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=`),add:async e=>[...e,`avif`],remove:async e=>e.filter(e=>e!==`avif`)},Fe=[`png`,`jpg`,`jpeg`],Ie={extension:{type:i.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...Fe],remove:async e=>e.filter(e=>!Fe.includes(e))},Le=`WorkerGlobalScope`in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Re(e){return Le?!1:document.createElement(`video`).canPlayType(e)!==``}var ze={extension:{type:i.DetectionParser,priority:0},test:async()=>Re(`video/mp4`),add:async e=>[...e,`mp4`,`m4v`],remove:async e=>e.filter(e=>e!==`mp4`&&e!==`m4v`)},Be={extension:{type:i.DetectionParser,priority:0},test:async()=>Re(`video/ogg`),add:async e=>[...e,`ogv`],remove:async e=>e.filter(e=>e!==`ogv`)},Ve={extension:{type:i.DetectionParser,priority:0},test:async()=>Re(`video/webm`),add:async e=>[...e,`webm`],remove:async e=>e.filter(e=>e!==`webm`)},He={extension:{type:i.DetectionParser,priority:0},test:async()=>Ne(`data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=`),add:async e=>[...e,`webp`],remove:async e=>e.filter(e=>e!==`webp`)},Ue=class e{constructor(){this.loadOptions={...e.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let n={promise:null,parser:null};return n.promise=(async()=>{let r=null,i=null;if((t.parser||t.loadParser)&&(i=this._parserHash[t.parser||t.loadParser],t.loadParser&&d(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),i||d(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!i){for(let n=0;n<this.parsers.length;n++){let r=this.parsers[n];if(r.load&&r.test?.(e,t,this)){i=r;break}}if(!i)return d(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await i.load(e,t,this),n.parser=i;for(let e=0;e<this.parsers.length;e++){let i=this.parsers[e];i.parse&&i.parse&&await i.testParse?.(r,t,this)&&(r=await i.parse(r,t,this)||r,n.parser=i)}return r})(),n}async load(t,n){this._parsersValidated||this._validateParsers();let{onProgress:r,onError:i,strategy:a,retryCount:o,retryDelay:s}=typeof n==`function`?{...e.defaultOptions,...this.loadOptions,onProgress:n}:{...e.defaultOptions,...this.loadOptions,...n||{}},c=0,l={},u=ee(t),d=g(t,e=>({alias:[e],src:e,data:{}})),f=d.reduce((e,t)=>e+(t.progressSize||1),0),p=d.map(async e=>{let t=_.toAbsolute(e.src);l[e.src]||(await this._loadAssetWithRetry(t,e,{onProgress:r,onError:i,strategy:a,retryCount:o,retryDelay:s},l),c+=e.progressSize||1,r&&r(c/f))});return await Promise.all(p),u?l[d[0].src]:l}async unload(e){let t=g(e,e=>({alias:[e],src:e})).map(async e=>{let t=_.toAbsolute(e.src),n=this.promiseCache[t];if(n){let r=await n.promise;delete this.promiseCache[t],await n.parser?.unload?.(r,e,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?d(`[Assets] parser should have an id`):(e[t.name]||e[t.id])&&d(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,n,r){let i=0,{onError:a,strategy:o,retryCount:s,retryDelay:c}=n,l=e=>new Promise(t=>setTimeout(t,e));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),r[t.src]=await this.promiseCache[e].promise;return}catch(n){if(delete this.promiseCache[e],delete r[t.src],i++,o===`retry`&&!(o!==`retry`||i>s)){a&&a(n,t),await l(c);continue}if(o===`skip`){a&&a(n,t);return}throw a&&a(n,t),Error(`[Loader.load] Failed to load ${e}.
${n}`)}}};Ue.defaultOptions={onProgress:void 0,onError:void 0,strategy:`throw`,retryCount:3,retryDelay:250};var We=Ue;function T(e,t){if(Array.isArray(t)){for(let n of t)if(e.startsWith(`data:${n}`))return!0;return!1}return e.startsWith(`data:${t}`)}function E(e,t){let n=e.split(`?`)[0],r=_.extname(n).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}var Ge=`.json`,Ke=`application/json`,qe={extension:{type:i.LoadParser,priority:v.Low},name:`loadJson`,id:`json`,test(e){return T(e,Ke)||E(e,Ge)},async load(e){return await(await r.get().fetch(e)).json()}},Je=`.txt`,Ye=`text/plain`,Xe={name:`loadTxt`,id:`text`,extension:{type:i.LoadParser,priority:v.Low,name:`loadTxt`},test(e){return T(e,Ye)||E(e,Je)},async load(e){return await(await r.get().fetch(e)).text()}},Ze=[`normal`,`bold`,`100`,`200`,`300`,`400`,`500`,`600`,`700`,`800`,`900`],Qe=[`.ttf`,`.otf`,`.woff`,`.woff2`],$e=[`font/ttf`,`font/otf`,`font/woff`,`font/woff2`],et=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function tt(e){let t=_.extname(e),n=_.basename(e,t).replace(/(-|_)/g,` `).toLowerCase().split(` `).map(e=>e.charAt(0).toUpperCase()+e.slice(1)),r=n.length>0;for(let e of n)if(!e.match(et)){r=!1;break}let i=n.join(` `);return r||(i=`"${i.replace(/[\\"]/g,`\\$&`)}"`),i}var nt=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function rt(e){return nt.test(e)?e:encodeURI(e)}var it={extension:{type:i.LoadParser,priority:v.Low},name:`loadWebFont`,id:`web-font`,test(e){return T(e,$e)||E(e,Qe)},async load(e,t){let n=r.get().getFontFaceSet();if(n){let r=[],i=t.data?.family??tt(e),a=t.data?.weights?.filter(e=>Ze.includes(e))??[`normal`],o=t.data??{};for(let t=0;t<a.length;t++){let s=a[t],c=new FontFace(i,`url(${rt(e)})`,{...o,weight:s});await c.load(),n.add(c),r.push(c)}return S.has(`${i}-and-url`)?S.get(`${i}-and-url`).entries.push({url:e,faces:r}):S.set(`${i}-and-url`,{entries:[{url:e,faces:r}]}),r.length===1?r[0]:r}return d(`[loadWebFont] FontFace API is not supported. Skipping loading font`),null},unload(e){let t=Array.isArray(e)?e:[e],n=t[0].family,i=S.get(`${n}-and-url`),a=i.entries.find(e=>e.faces.some(e=>t.indexOf(e)!==-1));a.faces=a.faces.filter(e=>t.indexOf(e)===-1),a.faces.length===0&&(i.entries=i.entries.filter(e=>e!==a)),t.forEach(e=>{r.get().getFontFaceSet().delete(e)}),i.entries.length===0&&S.remove(`${n}-and-url`)}};function at(e,t=1){let n=y.RETINA_PREFIX?.exec(e);return n?parseFloat(n[1]):t}function ot(e,t,n){e.label=n,e._sourceOrigin=n;let r=new s({source:e,label:n}),i=()=>{delete t.promiseCache[n],S.has(n)&&S.remove(n)};return r.source.once(`destroy`,()=>{t.promiseCache[n]&&(d(`[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource.`),i())}),r.once(`destroy`,()=>{e.destroyed||(d(`[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture.`),i())}),r}var st=`.svg`,ct=`image/svg+xml`,lt={extension:{type:i.LoadParser,priority:v.Low,name:`loadSVG`},name:`loadSVG`,id:`svg`,config:{crossOrigin:`anonymous`,parseAsGraphicsContext:!1},test(e){return T(e,ct)||E(e,st)},async load(e,t,n){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?dt(e):ut(e,t,n,this.config.crossOrigin)},unload(e){e.destroy(!0)}};async function ut(e,t,n,i){let a=await r.get().fetch(e),o=r.get().createImage();o.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await a.text())}`,o.crossOrigin=i,await o.decode();let s=t.data?.width??o.width,c=t.data?.height??o.height,l=t.data?.resolution||at(e),u=Math.ceil(s*l),d=Math.ceil(c*l),f=r.get().createCanvas(u,d),p=f.getContext(`2d`);p.imageSmoothingEnabled=!0,p.imageSmoothingQuality=`high`,p.drawImage(o,0,0,s*l,c*l);let{parseAsGraphicsContext:m,...h}=t.data??{};return ot(new ne({resource:f,alphaMode:`premultiply-alpha-on-upload`,resolution:l,...h}),n,e)}async function dt(e){let t=await(await r.get().fetch(e)).text(),n=new oe;return n.svg(t),n}var ft=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`,D=null,pt=class{constructor(){D||=URL.createObjectURL(new Blob([ft],{type:`application/javascript`})),this.worker=new Worker(D)}};pt.revokeObjectURL=function(){D&&=(URL.revokeObjectURL(D),null)};var mt=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`,O=null,ht=class{constructor(){O||=URL.createObjectURL(new Blob([mt],{type:`application/javascript`})),this.worker=new Worker(O)}};ht.revokeObjectURL=function(){O&&=(URL.revokeObjectURL(O),null)};var gt=0,_t,vt=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported===void 0&&(this._isImageBitmapSupported=new Promise(e=>{let{worker:t}=new pt;t.addEventListener(`message`,n=>{t.terminate(),pt.revokeObjectURL(),e(n.data)})})),this._isImageBitmapSupported}loadImageBitmap(e,t){return this._run(`loadImageBitmap`,[e,t?.data?.alphaMode])}async _initWorkers(){this._initialized||=!0}_getWorker(){_t===void 0&&(_t=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<_t&&(this._createdWorkers++,e=new ht().worker,e.addEventListener(`message`,e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error===void 0?this._resolveHash[e.uuid].resolve(e.data):this._resolveHash[e.uuid].reject(e.error),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();let n=new Promise((n,r)=>{this._queue.push({id:e,arguments:t,resolve:n,reject:r})});return this._next(),n}_next(){if(!this._queue.length)return;let e=this._getWorker();if(!e)return;let t=this._queue.pop(),n=t.id;this._resolveHash[gt]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:gt++,id:n})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(Error(`WorkerManager has been reset before completion`))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}},yt=[`.jpeg`,`.jpg`,`.png`,`.webp`,`.avif`],bt=[`image/jpeg`,`image/png`,`image/webp`,`image/avif`];async function xt(e,t){let n=await r.get().fetch(e);if(!n.ok)throw Error(`[loadImageBitmap] Failed to fetch ${e}: ${n.status} ${n.statusText}`);let i=await n.blob();return t?.data?.alphaMode===`premultiplied-alpha`?createImageBitmap(i,{premultiplyAlpha:`none`}):createImageBitmap(i)}var St={name:`loadTextures`,id:`texture`,extension:{type:i.LoadParser,priority:v.High,name:`loadTextures`},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:`anonymous`},test(e){return T(e,bt)||E(e,yt)},async load(e,t,n){let i=null;return i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await vt.isImageBitmapSupported()?await vt.loadImageBitmap(e,t):await xt(e,t):await new Promise((t,n)=>{i=r.get().createImage(),i.crossOrigin=this.config.crossOrigin,i.src=e,i.complete?t(i):(i.onload=()=>{t(i)},i.onerror=n)}),ot(new ne({resource:i,alphaMode:`premultiply-alpha-on-upload`,resolution:t.data?.resolution||at(e),...t.data}),n,e)},unload(e){e.destroy(!0)}},Ct=[`.mp4`,`.m4v`,`.webm`,`.ogg`,`.ogv`,`.h264`,`.avi`,`.mov`],wt,Tt;function Et(e,t,n){n===void 0&&!t.startsWith(`data:`)?e.crossOrigin=Ot(t):n!==!1&&(e.crossOrigin=typeof n==`string`?n:`anonymous`)}function Dt(e){return new Promise((t,n)=>{e.addEventListener(`canplaythrough`,r),e.addEventListener(`error`,i),e.load();function r(){a(),t()}function i(e){a(),n(e)}function a(){e.removeEventListener(`canplaythrough`,r),e.removeEventListener(`error`,i)}})}function Ot(e,t=globalThis.location){if(e.startsWith(`data:`))return``;t||=globalThis.location;let n=new URL(e,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?`anonymous`:``}function kt(){let e=[],t=[];for(let n of Ct){let r=x.MIME_TYPES[n.substring(1)]||`video/${n.substring(1)}`;Re(r)&&(e.push(n),t.includes(r)||t.push(r))}return{validVideoExtensions:e,validVideoMime:t}}var At={name:`loadVideo`,id:`video`,extension:{type:i.LoadParser,name:`loadVideo`},test(e){if(!wt||!Tt){let{validVideoExtensions:e,validVideoMime:t}=kt();wt=e,Tt=t}let t=T(e,Tt),n=E(e,wt);return t||n},async load(e,t,n){let r={...x.defaultOptions,resolution:t.data?.resolution||at(e),alphaMode:t.data?.alphaMode||await te(),...t.data},i=document.createElement(`video`),a={preload:r.autoLoad===!1?void 0:`auto`,"webkit-playsinline":r.playsinline===!1?void 0:``,playsinline:r.playsinline===!1?void 0:``,muted:r.muted===!0?``:void 0,loop:r.loop===!0?``:void 0,autoplay:r.autoPlay===!1?void 0:``};Object.keys(a).forEach(e=>{let t=a[e];t!==void 0&&i.setAttribute(e,t)}),r.muted===!0&&(i.muted=!0),Et(i,e,r.crossorigin);let o=document.createElement(`source`),s;if(r.mime)s=r.mime;else if(e.startsWith(`data:`))s=e.slice(5,e.indexOf(`;`));else if(!e.startsWith(`blob:`)){let t=e.split(`?`)[0].slice(e.lastIndexOf(`.`)+1).toLowerCase();s=x.MIME_TYPES[t]||`video/${t}`}return o.src=e,s&&(o.type=s),new Promise(a=>{let s=async()=>{let o=new x({...r,resource:i});i.removeEventListener(`canplay`,s),t.data.preload&&await Dt(i),a(ot(o,n,e))};r.preload&&!r.autoPlay&&i.load(),i.addEventListener(`canplay`,s),i.appendChild(o)})},unload(e){e.destroy(!0)}},jt={extension:{type:i.ResolveParser,name:`resolveTexture`},test:St.test,parse:e=>({resolution:parseFloat(y.RETINA_PREFIX.exec(e)?.[1]??`1`),format:e.split(`.`).pop(),src:e})},Mt={extension:{type:i.ResolveParser,priority:-2,name:`resolveJson`},test:e=>y.RETINA_PREFIX.test(e)&&e.endsWith(`.json`),parse:jt.parse},k=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new y,this.loader=new We,this.cache=S,this._backgroundLoader=new je(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){d(`[Assets]AssetManager already initialized, did you load before calling this Assets.init()?`);return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let t=e.manifest;typeof t==`string`&&(t=await this.load(t)),this.resolver.addManifest(t)}let t=e.texturePreference?.resolution??1,n=typeof t==`number`?[t]:t,r=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:n}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();let n=ee(e),r=g(e).map(e=>{if(typeof e!=`string`){let t=this.resolver.getAlias(e);return t.some(e=>!this.resolver.hasKey(e))&&this.add(e),Array.isArray(t)?t[0]:t}return this.resolver.hasKey(e)||this.add({alias:e,src:e}),e}),i=this.resolver.resolve(r),a=await this._mapLoadToResolve(i,t);return n?a[r[0]]:a}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;typeof e==`string`&&(n=!0,e=[e]);let r=this.resolver.resolveBundle(e),i={},a=Object.keys(r),o=0,s=[],c=()=>{t?.(s.reduce((e,t)=>e+t,0)/o)},l=a.map((e,t)=>{let n=r[e],a=Object.values(n),l=[...new Set(a.flat())].reduce((e,t)=>e+(t.progressSize||1),0);return s.push(0),o+=l,this._mapLoadToResolve(n,e=>{s[t]=e*l,c()}).then(t=>{i[e]=t})});return await Promise.all(l),n?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),typeof e==`string`&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e==`string`&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(e=>{this._backgroundLoader.add(Object.values(e))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e==`string`)return S.get(e);let t={};for(let n=0;n<e.length;n++)t[n]=S.get(e[n]);return t}async _mapLoadToResolve(e,t){let n=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;let r=await this.loader.load(n,t);this._backgroundLoader.active=!0;let i={};return n.forEach(e=>{let t=r[e.src],n=[e.src];e.alias&&n.push(...e.alias),n.forEach(e=>{i[e]=t}),S.set(n,t)}),i}async unload(e){this._initialized||await this.init();let t=g(e).map(e=>typeof e==`string`?e:e.src),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=g(e);let t=this.resolver.resolveBundle(e),n=Object.keys(t).map(e=>this._unloadFromResolved(t[e]));await Promise.all(n)}async _unloadFromResolved(e){let t=Object.values(e);t.forEach(e=>{S.remove(e.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((e,n)=>t.indexOf(e)===n),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(t=>t in e).forEach(n=>{t.config[n]=e[n]})})}};t.handleByList(i.LoadParser,k.loader.parsers).handleByList(i.ResolveParser,k.resolver.parsers).handleByList(i.CacheParser,k.cache.parsers).handleByList(i.DetectionParser,k.detections),t.add(Me,Ie,Pe,He,ze,Be,Ve,qe,Xe,it,lt,St,At,Ae,ke,jt,Mt);var Nt={loader:i.LoadParser,resolver:i.ResolveParser,cache:i.CacheParser,detection:i.DetectionParser};t.handle(i.Asset,e=>{let n=e.ref;Object.entries(Nt).filter(([e])=>!!n[e]).forEach(([e,r])=>t.add(Object.assign(n[e],{extension:n[e].extension??r})))},e=>{let n=e.ref;Object.keys(Nt).filter(e=>!!n[e]).forEach(e=>t.remove(n[e]))});var Pt=class{constructor({matrix:e,observer:t}={}){this.dirty=!0,this._matrix=e??new p,this.observer=t,this.position=new f(this,0,0),this.scale=new f(this,1,1),this.pivot=new f(this,0,0),this.skew=new f(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){let e=this._matrix;return this.dirty?(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1,e):e}_onUpdate(e){this.dirty=!0,e===this.skew&&this.updateSkew(),this.observer?._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}},Ft=class t extends e{constructor(...e){let n=e[0]||{};n instanceof s&&(n={texture:n}),e.length>1&&(u(l,`use new TilingSprite({ texture, width:100, height:100 }) instead`),n.width=e[1],n.height=e[2]),n={...t.defaultOptions,...n};let{texture:r,anchor:i,tilePosition:a,tileScale:o,tileRotation:c,width:d,height:p,applyAnchorToTexture:m,roundPixels:h,...g}=n??{};super({label:`TilingSprite`,...g}),this.renderPipeId=`tilingSprite`,this.batched=!0,this.allowChildren=!1,this._anchor=new f({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=m,this.texture=r,this._width=d??r.width,this._height=p??r.height,this._tileTransform=new Pt({observer:{_onUpdate:()=>this.onViewUpdate()}}),i&&(this.anchor=i),this.tilePosition=a,this.tileScale=o,this.tileRotation=c,this.roundPixels=h??!1}static from(e,n={}){return typeof e==`string`?new t({texture:S.get(e),...n}):new t({texture:e,...n})}get uvRespectAnchor(){return u(l,`uvRespectAnchor is deprecated, please use applyAnchorToTexture instead`),this.applyAnchorToTexture}set uvRespectAnchor(e){u(l,`uvRespectAnchor is deprecated, please use applyAnchorToTexture instead`),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e==`number`?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e==`number`?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||=s.EMPTY;let t=this._texture;t!==e&&(t&&t.dynamic&&t.off(`update`,this.onViewUpdate,this),e.dynamic&&e.on(`update`,this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,t){typeof e==`object`&&(t=e.height??e.width,e=e.width),this._width=e,this._height=t??e,this.onViewUpdate()}getSize(e){return e||={},e.width=this._width,e.height=this._height,e}updateBounds(){let e=this._bounds,t=this._anchor,n=this._width,r=this._height;e.minX=-t._x*n,e.maxX=e.minX+n,e.minY=-t._y*r,e.maxY=e.minY+r}containsPoint(e){let t=this._width,n=this._height,r=-t*this._anchor._x,i=0;return e.x>=r&&e.x<=r+t&&(i=-n*this._anchor._y,e.y>=i&&e.y<=i+n)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e==`boolean`?e:e?.texture){let t=typeof e==`boolean`?e:e?.textureSource;this._texture.destroy(t)}this._texture=null}};Ft.defaultOptions={texture:s.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};var It=Ft,Lt=class extends e{constructor(e,t){let{text:n,resolution:r,style:i,anchor:a,width:o,height:s,roundPixels:c,...l}=e;super({...l}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=n??``,this.style=i,this.resolution=r??null,this.allowChildren=!1,this._anchor=new f({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=c??!1,o!==void 0&&(this.width=o),s!==void 0&&(this.height=s)}get anchor(){return this._anchor}set anchor(e){typeof e==`number`?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||={},this._style?.off(`update`,this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on(`update`,this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||={},e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e==`object`?(t=e.height??e.width,e=e.width):t??=e,e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){let t=this.bounds.width,n=this.bounds.height,r=-t*this.anchor.x,i=0;return e.x>=r&&e.x<=r+t&&(i=-n*this.anchor.y,e.y>=i&&e.y<=i+n)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e==`boolean`?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}};function Rt(e,t){let n=e[0]??{};return(typeof n==`string`||e[1])&&(u(l,`use new ${t}({ text: "hi!", style }) instead`),n={text:n,style:e[1]}),n}var A=class extends Lt{constructor(...e){let t=Rt(e,`Text`);super(t,b),this.renderPipeId=`text`,t.textureStyle&&(this.textureStyle=t.textureStyle instanceof c?t.textureStyle:new c(t.textureStyle))}updateBounds(){let e=this._bounds,t=this._anchor,n=0,r=0;if(this._style.trim){let{frame:e,canvasAndContext:t}=ie.getCanvasAndContext({text:this.text,style:this._style,resolution:1});ie.returnCanvasAndContext(t),n=e.width,r=e.height}else{let e=re.measureText(this._text,this._style);n=e.width,r=e.height}e.minX=-t._x*n,e.maxX=e.minX+n,e.minY=-t._y*r,e.maxY=e.minY+r}},zt=(e=>(e.CLAMP=`clamp-to-edge`,e.REPEAT=`repeat`,e.MIRRORED_REPEAT=`mirror-repeat`,e))(zt||{}),Bt=new Proxy(zt,{get(e,t){return u(l,`DRAW_MODES.${t} is deprecated, use '${zt[t]}' instead`),e[t]}}),Vt=(e=>(e.NEAREST=`nearest`,e.LINEAR=`linear`,e))(Vt||{});new Proxy(Vt,{get(e,t){return u(l,`DRAW_MODES.${t} is deprecated, use '${Vt[t]}' instead`),e[t]}}),t.add(me,he);var j=new Ce;await j.init({resizeTo:window,backgroundColor:`#775a2322`}),document.body.appendChild(j.canvas),window.addEventListener(`resize`,()=>{j.renderer.resize(window.innerWidth,window.innerHeight)});function M(e){return 1-Math.cos(e*Math.PI/2)}var Ht=await k.load(`./sprites/885.jpg`);Ht.baseTexture.wrapMode=Bt.REPEAT;var Ut=await k.load(`./sprites/desk.png`),Wt=await k.load(`./sprites/sign.png`),Gt=await k.load(`./sprites/3.png`),Kt=await k.load(`./sprites/1.png`),qt=await k.load(`./sprites/2.png`),Jt=await k.load(`./sprites/correct.png`),Yt=await k.load(`./sprites/incorrect.png`),N=[Gt,Kt,qt],P=[],F=new It({texture:Ht,width:window.innerWidth,height:window.innerHeight});F.tileScale.set(.1,.1),F.position.set(0,0),F.zIndex=-1,j.stage.addChild(F);var I=new b({fontFamily:`Arial`,fontSize:20,fontWeight:`bold`,fill:`#ffffffcc`}),Xt=new b({fontFamily:`Arial`,fontSize:35,fill:`#ffffff`,fontWeight:`bold`,align:`center`,wordWrap:!0,wordWrapWidth:window.innerWidth*.8}),Zt=new b({fontFamily:`Arial`,fontSize:50,fontWeight:`bold`,fill:`#240e0eff`}),L=new C;L.beginFill(`#240e0eff`),L.drawRect(0,-window.innerHeight/2,window.innerWidth,window.innerHeight),L.endFill(),L.zIndex=1e3,j.stage.addChild(L);var R=new C;R.beginFill(`#240e0eff`),R.drawRect(0,window.innerHeight/2,window.innerWidth,window.innerHeight),R.endFill(),R.zIndex=1e3,j.stage.addChild(R);var z=new A(`The game "Sorting garbage"
Student: Ramazanov Emir
The goal of the game is to learn how to sort waste by type: plastic, paper, metal.
Click "Start" to start the game.`,Xt);z.anchor.set(.5),z.position.set(window.innerWidth/2,window.innerHeight/3),z.zIndex=1001,j.stage.addChild(z);var B=new C;B.beginFill(`#9b8f24ff`),B.drawRoundedRect(0,0,300,100,30),B.endFill(),B.position.set(window.innerWidth/2-B.width/2,window.innerHeight/2+20),B.zIndex=1001,j.stage.addChild(B);var V=new C;V.beginFill(`#c9b92bff`),V.drawRoundedRect(0,0,300,100,30),V.endFill(),V.position.set(window.innerWidth/2-V.width/2,window.innerHeight/2),V.zIndex=1001,j.stage.addChild(V);var H=new A(`START`,Zt);H.position.set(window.innerWidth/2-H.width/2,window.innerHeight/2+20),H.zIndex=1001,j.stage.addChild(H);var U=!1,Qt=0,$t=.2;V.interactive=!0,V.cursor=`pointer`,V.on(`pointerdown`,()=>{U=!0});var en=!1;V.on(`pointerup`,()=>{U=!1,en=!0,j.ticker.add(function e(){L.y-=10,z.y-=10,R.y+=10,V.y+=10,B.y+=10,H.y+=10,L.y+window.innerHeight<0&&R.y>window.innerHeight&&j.ticker.remove(e)})}),V.on(`pointerupoutside`,()=>{U=!1}),j.ticker.add(()=>{en||(Qt+=((U?20:0)-Qt)*$t,V.position.y=window.innerHeight/2+Qt,H.position.y=window.innerHeight/2+20+Qt)});var W=new a;W.x=window.innerWidth/2,W.y=window.innerHeight/2,j.stage.addChild(W);var tn=new h(Ut);tn.scale.set(.8),tn.position.set(window.innerWidth/2-window.innerWidth/1.42,-25),W.addChild(tn);var G=new C;G.beginFill(`#425826ff`),G.drawRoundedRect(0,0,200,300,30),G.endFill(),G.position.set(window.innerWidth/2-window.innerWidth/1.42,-400),W.addChild(G);var K=new C;K.beginFill(`#394b21ff`),K.drawRoundedRect(0,0,200,200,30),K.endFill(),K.position.set(window.innerWidth/2-window.innerWidth/1.42,-400),W.addChild(K);var q=new C;q.beginFill(`#29331dff`),q.drawRoundedRect(20,20,160,160,20),q.endFill(),q.position.set(window.innerWidth/2-window.innerWidth/1.42,-400),W.addChild(q);var nn=new h(Wt);nn.position.set(G.x+70,-195),W.addChild(nn);var rn=new A(`PLASTIC`,I);rn.position.set(G.x+58,-135),W.addChild(rn);var J=new C;J.beginFill(`#425826ff`),J.drawRoundedRect(0,0,200,300,30),J.endFill(),J.position.set(window.innerWidth/2-window.innerWidth/1.85,-400),W.addChild(J);var Y=new C;Y.beginFill(`#394b21ff`),Y.drawRoundedRect(0,0,200,200,30),Y.endFill(),Y.position.set(window.innerWidth/2-window.innerWidth/1.85,-400),W.addChild(Y);var X=new C;X.beginFill(`#29331dff`),X.drawRoundedRect(20,20,160,160,20),X.endFill(),X.position.set(window.innerWidth/2-window.innerWidth/1.85,-400),W.addChild(X);var an=new h(Wt);an.position.set(J.x+70,-195),W.addChild(an);var on=new A(`PAPER`,I);on.position.set(J.x+65,-135),W.addChild(on);var Z=new C;Z.beginFill(`#425826ff`),Z.drawRoundedRect(0,0,200,300,30),Z.endFill(),Z.position.set(window.innerWidth/2-window.innerWidth/2.6,-400),W.addChild(Z);var Q=new C;Q.beginFill(`#394b21ff`),Q.drawRoundedRect(0,0,200,200,30),Q.endFill(),Q.position.set(window.innerWidth/2-window.innerWidth/2.6,-400),W.addChild(Q);var $=new C;$.beginFill(`#29331dff`),$.drawRoundedRect(20,20,160,160,20),$.endFill(),$.position.set(window.innerWidth/2-window.innerWidth/2.6,-400),W.addChild($);var sn=new h(Wt);sn.position.set(Z.x+70,-195),W.addChild(sn);var cn=new A(`METALL`,I);cn.position.set(Z.x+62,-135),W.addChild(cn);var ln=new A(`TRUE`,I);ln.position.set(window.innerWidth/2-100,window.innerHeight/2-100),ln.alpha=0,j.stage.addChild(ln);var un=[{container:q,type:`plastic`},{container:X,type:`paper`},{container:$,type:`metall`}];function dn(e,t,n){let r=new h(e?Jt:Yt);r.anchor.set(.5),r.position.set(t,n);let i=.3;r.scale.set(0),r.alpha=0,W.addChild(r);let a=0;j.ticker.add(function e(t){if(a+=t.deltaMS,a<=500/2){let e=M(a/(500/2));r.alpha=e,r.scale.set(e*i)}else if(a<=500){let e=M(1-(a-500/2)/(500/2));r.alpha=e,r.scale.set(e*i)}else j.ticker.remove(e),W.removeChild(r)})}function fn(){let e={xMin:-380,xMax:420,yMin:100,yMax:400},t=0;for(;t<50;){t++;let n=Math.random()*(e.xMax-e.xMin)+e.xMin,r=Math.random()*(e.yMax-e.yMin)+e.yMin,i=N[Math.floor(Math.random()*N.length)],a=Math.random()*Math.PI*2,o=!1;for(let e of P){let t=e.x-n,i=e.y-r;if(Math.sqrt(t*t+i*i)<120){o=!0;break}}if(!o){let e=new h(i);e.anchor.set(.5),e.rotation=a,e.scale.set(.4),e.position.set(n,r),e.type=N.indexOf(i)===0?`plastic`:N.indexOf(i)===1?`metall`:`paper`;let t={x:n,y:r};W.addChild(e),P.push(e),e.interactive=!0,e.cursor=`pointer`;let o=.4,s=.4,c=0,l=!1,u=!1,d=!1,f=0,p=0,m=!1,g=0;e.on(`pointerdown`,t=>{let n=t.data.getLocalPosition(W);f=e.x-n.x,p=e.y-n.y,d=!0,e.zIndex=1e3,s=e.scale.x,o=.55,c=0,l=!0,u=!1,m=!1}),e.on(`pointerup`,t=>{d=!1,e.zIndex=0;let n=t.data.getLocalPosition(W),r=null;for(let t of un)if(pn(e,[t.container])){r=t;break}if(r)if(r.type===e.type){dn(!0,n.x,n.y);let t=0;j.ticker.add(function n(r){t+=r.deltaMS;let i=Math.min(t/300,1),a=M(i);e.scale.set(.4*(1-a)),e.alpha=1-a,i>=1&&(j.ticker.remove(n),W.removeChild(e),P.splice(P.indexOf(e),1))})}else dn(!1,n.x,n.y),m=!0,g=0;else m=!0,g=0;s=e.scale.x,o=.4,c=0,l=!1,u=!0}),e.on(`pointerupoutside`,()=>{d=!1,e.zIndex=0,m=!0,g=0,s=e.scale.x,o=.4,c=0,l=!1,u=!0}),e.on(`pointermove`,t=>{if(d){let n=t.data.getLocalPosition(W);e.x=n.x+f,e.y=n.y+p}}),j.ticker.add(n=>{if(l||u){c+=n.deltaMS/30;let t=Math.min(c,1),r=M(t),i=s+(o-s)*r;e.scale.set(i),t>=1&&(l=!1,u=!1)}if(m){g+=n.deltaMS/60;let r=Math.min(g,1),i=M(r);e.x+=(t.x-e.x)*i,e.y+=(t.y-e.y)*i,r>=1&&(m=!1)}});break}}}function pn(e,t){for(let n of t){let t=e.getBounds(),r=n.getBounds();if(t.x+t.width>r.x&&t.x<r.x+r.width&&t.y+t.height>r.y&&t.y<r.y+r.height)return!0}return!1}j.ticker.add(()=>{P.length<10&&fn()});